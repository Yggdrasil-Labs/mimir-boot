version: 2
updates:
  # Maven ä¾èµ–æ›´æ–°
  - package-ecosystem: "maven"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    reviewers:
      - "yggdrasil-labs"
    assignees:
      - "yggdrasil-labs"
    commit-message:
      prefix: "chore"
      include: "scope"
    labels:
      - "ğŸ“¦ deps"
    # å¿½ç•¥ä¸»è¦ç‰ˆæœ¬æ›´æ–°ï¼ˆç ´åæ€§å˜æ›´ï¼‰
    ignore:
      # Spring Boot ä¸»è¦ç‰ˆæœ¬æ›´æ–°éœ€è¦æ‰‹åŠ¨å¤„ç†
      - dependency-name: "org.springframework.boot:spring-boot-dependencies"
        update-types: ["version-update:semver-major"]
      # Spring Cloud ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "org.springframework.cloud:spring-cloud-dependencies"
        update-types: ["version-update:semver-major"]
      # Spring Cloud Alibaba ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "com.alibaba.cloud:spring-cloud-alibaba-dependencies"
        update-types: ["version-update:semver-major"]
      # MyBatis Plus ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "com.baomidou:mybatis-plus-boot-starter"
        update-types: ["version-update:semver-major"]
      # æ•°æ®åº“é©±åŠ¨ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "com.mysql:mysql-connector-j"
        update-types: ["version-update:semver-major"]
      - dependency-name: "org.postgresql:postgresql"
        update-types: ["version-update:semver-major"]
      # æ¶ˆæ¯é˜Ÿåˆ—ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "org.apache.rocketmq:rocketmq-spring-boot-starter"
        update-types: ["version-update:semver-major"]
      # æœç´¢å¼•æ“ä¸»è¦ç‰ˆæœ¬æ›´æ–°
      - dependency-name: "org.elasticsearch.client:elasticsearch-java"
        update-types: ["version-update:semver-major"]
      - dependency-name: "org.mongodb:mongodb-driver-sync"
        update-types: ["version-update:semver-major"]
      # Java ç‰ˆæœ¬ç›¸å…³æ›´æ–°
      - dependency-name: "org.apache.maven.plugins:maven-compiler-plugin"
        update-types: ["version-update:semver-major"]
    # å…è®¸çš„æ›´æ–°ç±»å‹
    allow:
      - dependency-type: "direct"
      - dependency-type: "indirect"
    # åˆ†ç»„ç›¸å…³ä¾èµ–
    groups:
      # Spring ç”Ÿæ€
      spring-ecosystem:
        patterns:
          - "org.springframework.boot:*"
          - "org.springframework.cloud:*"
          - "org.springframework.security:*"
          - "com.alibaba.cloud:*"
        update-types: ["minor", "patch"]
      # æ•°æ®åº“ç›¸å…³
      database:
        patterns:
          - "com.mysql:*"
          - "org.postgresql:*"
          - "com.zaxxer:*"
          - "com.baomidou:*"
        update-types: ["minor", "patch"]
      # æµ‹è¯•æ¡†æ¶
      testing:
        patterns:
          - "org.junit.jupiter:*"
          - "org.mockito:*"
          - "org.testcontainers:*"
        update-types: ["minor", "patch"]
      # å·¥å…·ç±»
      utilities:
        patterns:
          - "org.projectlombok:*"
          - "cn.hutool:*"
          - "com.alibaba.fastjson2:*"
          - "com.fasterxml.jackson.*:*"
        update-types: ["minor", "patch"]
      # ç›‘æ§å’Œå®‰å…¨
      monitoring-security:
        patterns:
          - "io.micrometer:*"
          - "io.jsonwebtoken:*"
        update-types: ["minor", "patch"]
      # æ¶ˆæ¯é˜Ÿåˆ—
      messaging:
        patterns:
          - "org.springframework.kafka:*"
          - "org.apache.rocketmq:*"
        update-types: ["minor", "patch"]
      # æœç´¢å¼•æ“å’ŒNoSQL
      search-nosql:
        patterns:
          - "org.elasticsearch.client:*"
          - "org.mongodb:*"
        update-types: ["minor", "patch"]
      # å®šæ—¶ä»»åŠ¡
      scheduling:
        patterns:
          - "com.xuxueli:*"
        update-types: ["minor", "patch"]
      # åˆ†å¸ƒå¼ç¼“å­˜
      caching:
        patterns:
          - "com.alicp.jetcache:*"
        update-types: ["minor", "patch"]
      # Maven æ’ä»¶
      maven-plugins:
        patterns:
          - "org.apache.maven.plugins:*"
          - "org.codehaus.mojo:*"
          - "org.springframework.boot:spring-boot-maven-plugin"
          - "org.jacoco:jacoco-maven-plugin"
          - "com.github.spotbugs:spotbugs-maven-plugin"
          - "org.codehaus.mojo:flatten-maven-plugin"
          - "org.sonarsource.scanner.maven:sonar-maven-plugin"
        update-types: ["minor", "patch"]

  # GitHub Actions æ›´æ–°
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    reviewers:
      - "yggdrasil-labs"
    assignees:
      - "yggdrasil-labs"
    commit-message:
      prefix: "ci"
      include: "scope"
    labels:
      - "ğŸ§° infra"